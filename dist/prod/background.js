/*! For license information please see background.js.LICENSE.txt */
(()=>{"use strict";var e={713:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator,g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var w=b.prototype=new v;w.constructor=b,h(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,o)&&!k.hasOwnProperty(o)&&(a[o]=t[o]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===a[o]&&(a[o]=u[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:I.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===a?"."+O(u,0):a,x(i)?(o="",null!=e&&(o=e.replace(T,"$&/")+"/"),j(i,t,o,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),t.push(i)),1;if(u=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var l=a+O(s=e[c],c);u+=j(s,t,o,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=j(s=s.value,t,o,l=a+O(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function D(e,t,n){if(null==e)return e;var r=[],o=0;return j(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},A={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:A,ReactCurrentOwner:I};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=P,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=h({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},758:(e,t,n)=>{e.exports=n(713)}},t={};!function(){function e(){this.logs=[],this.MAX_LOGS=1e3}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getCallerInfo=function(){var e=(new Error).stack;if(e){var t=e.split("\n")[3];if(t){var n=t.match(/chrome-extension:\/\/[^/]+\/([^:]+):(\d+):(\d+)/);if(n)return{file:n[1],line:parseInt(n[2],10),column:parseInt(n[3],10)}}}},e.prototype.formatMessage=function(e,t,n){void 0===t&&(t={});var r=(new Date).toISOString(),o=t.group?"[".concat(t.group,"]"):"",a=n?"(".concat(n.file,":").concat(n.line,":").concat(n.column,")"):"";return"".concat(r," ").concat(o," ").concat(a," ").concat(e)},e.prototype.storeLog=function(e,t,n){if(void 0===n&&(n={}),n.persist){var r=this.getCallerInfo();this.logs.push({message:e,level:t,timestamp:Date.now(),group:n.group,caller:r}),this.logs.length>this.MAX_LOGS&&this.logs.shift()}},e.prototype.debug=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.debug(r),this.storeLog(e,"debug",t)},e.prototype.info=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.info(r),this.storeLog(e,"info",t)},e.prototype.warn=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.warn(r),this.storeLog(e,"warn",t)},e.prototype.error=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.error(r),this.storeLog(e,"error",t)},e.prototype.getLogs=function(){return this.logs},e.prototype.clearLogs=function(){this.logs=[]}}();var n,r,o=function(){},a=function(){},i=function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(758),s=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});r=Error,s((function(e,t,n){var o=r.call(this,e)||this;return o.code=t,o.details=n,o.name="AppError",o}),r);const u=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,a);return a},c=e=>e,l=e=>{const t=(e=>e?u(e):u)(e),n=e=>function(e,t=c){const n=i.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return i.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},f=e=>e?l(e):l;function p(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;const o=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),a=null!=(r=n.getItem(e))?r:null;return a instanceof Promise?a.then(o):o(a)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const d=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>d(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>d(t)(e)}}},g=(e,t)=>(n,r,o)=>{let a={storage:p((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const s=new Set,u=new Set;let c=a.storage;if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)}),r,o);const l=()=>{const e=a.partialize({...r()});return c.setItem(a.name,{state:e,version:a.version})},f=o.setState;o.setState=(e,t)=>{f(e,t),l()};const g=e(((...e)=>{n(...e),l()}),r,o);let h;o.getInitialState=()=>g;const y=()=>{var e,t;if(!c)return;i=!1,s.forEach((e=>{var t;return e(null!=(t=r())?t:g)}));const o=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:g))||void 0;return d(c.getItem.bind(c))(a.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate){const t=a.migrate(e.state,e.version);return t instanceof Promise?t.then((e=>[!0,e])):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]})).then((e=>{var t;const[o,i]=e;if(h=a.merge(i,null!=(t=r())?t:g),n(h,!0),o)return l()})).then((()=>{null==o||o(h,void 0),h=r(),i=!0,u.forEach((e=>e(h)))})).catch((e=>{null==o||o(void 0,e)}))};return o.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},a.skipHydration||y(),h||g};var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};f()(g((function(e){return{extensions:[],setExtensions:function(t){return e({extensions:t})},toggleExtension:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){return e.id===t?h(h({},e),{enabled:!e.enabled}):e}))}}))},toggleLock:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){return e.id===t?h(h({},e),{locked:!e.locked}):e}))}}))},importExtensionStates:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){var n=t.find((function(t){return t.id===e.id}));return n?h(h({},e),{enabled:n.enabled,locked:n.locked}):e}))}}))}}}),{name:"extension-manager-extensions"}));const y={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let m;const v=new Uint8Array(16),b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));const w=function(e,t,n){if(y.randomUUID&&!t&&!e)return y.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!m){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");m=crypto.getRandomValues.bind(crypto)}return m(v)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase()}(r)};var x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},k=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},_=null,E=(f()(g((function(e,t){return{tags:[],extensionTags:[],visibleTagId:null,isLoading:!1,initialize:function(){return S(void 0,void 0,void 0,(function(){var t;return I(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e({isLoading:!0}),_?(e({tags:_.tags,extensionTags:_.extensionTags,visibleTagId:null,isLoading:!1}),[2]):[4,chrome.storage.local.get("extension-manager-tags")];case 1:return(t=n.sent())["extension-manager-tags"]&&(o("Loading tags from storage",{group:"TagStore",persist:!0}),(_={tags:t["extension-manager-tags"].tags.map((function(e){return x(x({},e),{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})})),extensionTags:t["extension-manager-tags"].extensionTags,visibleTagId:null})&&e({tags:_.tags,extensionTags:_.extensionTags,visibleTagId:null,isLoading:!1})),[3,3];case 2:return n.sent(),a("Failed to load tags",{group:"TagStore",persist:!0}),e({isLoading:!1}),[3,3];case 3:return[2]}}))}))},setVisibleTag:function(t){e({visibleTagId:t})},showAllTags:function(){e({visibleTagId:null})},addTag:function(n){var r=t().tags,o={id:w(),name:n,order:0,createdAt:new Date,updatedAt:new Date},a=r.map((function(e){return x(x({},e),{order:e.order+1,updatedAt:new Date})})),i=k([o],a,!0);e({tags:i}),_&&(_.tags=i)},updateTag:function(n,r){var o=t().tags.map((function(e){return e.id===n?x(x({},e),{name:r,updatedAt:new Date}):e}));e({tags:o})},deleteTag:function(n){var r=t(),o=r.tags,a=r.extensionTags,i=o.filter((function(e){return e.id!==n})),s=a.map((function(e){return x(x({},e),{tagIds:e.tagIds.filter((function(e){return e!==n}))})}));e({tags:i,extensionTags:s})},reorderTags:function(n){var r=t().tags,o=n.map((function(e,t){var n=r.find((function(t){return t.id===e}));return n?x(x({},n),{order:t,updatedAt:new Date}):null})).filter((function(e){return null!==e}));e({tags:o})},addTagToExtension:function(n,r){var o=t().extensionTags,a=o.find((function(e){return e.extensionId===n}));if(a){if(!a.tagIds.includes(r)){var i=o.map((function(e){return e.extensionId===n?x(x({},e),{tagIds:k(k([],e.tagIds,!0),[r],!1)}):e}));e({extensionTags:i})}}else e({extensionTags:k(k([],o,!0),[{extensionId:n,tagIds:[r]}],!1)})},removeTagFromExtension:function(n,r){var o=t().extensionTags.map((function(e){return e.extensionId===n?x(x({},e),{tagIds:e.tagIds.filter((function(e){return e!==r}))}):e}));e({extensionTags:o})},importTags:function(t,n){e({tags:t,extensionTags:n})},exportTags:function(){var e=t();return{tags:e.tags,extensionTags:e.extensionTags}}}}),{name:"extension-manager-tags",storage:{getItem:function(e){return S(void 0,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),_?[2,_]:[4,chrome.storage.local.get(e)];case 1:return[2,t.sent()[e]];case 2:return t.sent(),a("Failed to get item from storage",{group:"TagStore",persist:!0}),[2,null];case 3:return[2]}}))}))},setItem:function(e,t){return S(void 0,void 0,void 0,(function(){var n;return I(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.storage.local.set((n={},n[e]=t,n))];case 1:return r.sent(),_=t,[3,3];case 2:return r.sent(),a("Failed to set item in storage",{group:"TagStore",persist:!0}),[3,3];case 3:return[2]}}))}))},removeItem:function(e){return S(void 0,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,chrome.storage.local.remove(e)];case 1:return t.sent(),_=null,[3,3];case 2:return t.sent(),a("Failed to remove item from storage",{group:"TagStore",persist:!0}),[3,3];case 3:return[2]}}))}))}}})),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}),T=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};o("Starting background script",{group:"background",persist:!0}),chrome.runtime.onInstalled.addListener((function(e){return T(void 0,void 0,void 0,(function(){return O(this,(function(t){switch(t.label){case 0:return o("Extension installed",{group:"background",persist:!0}),[4,T(void 0,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,T(void 0,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),[4,chrome.offscreen.hasDocument()];case 1:return e.sent()?[4,chrome.offscreen.closeDocument()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[4,chrome.offscreen.createDocument({url:"offscreen.html",reasons:["DOM_PARSER"],justification:"Detect system color scheme changes"})];case 4:return e.sent(),o("Offscreen document created successfully",{group:"background",persist:!0}),[3,6];case 5:return e.sent(),a("Failed to create offscreen document",{group:"background",persist:!0}),[3,6];case 6:return[2]}}))}))];case 1:return e.sent(),[2]}}))}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,6,,7]),"install"!==e.reason?[3,5]:(o("Starting storage clear",{group:"background",persist:!0}),[4,new Promise((function(e,t){chrome.storage.local.clear((function(){chrome.runtime.lastError?(a("Error clearing storage",{group:"background",persist:!0}),t(chrome.runtime.lastError)):(o("Storage cleared",{group:"background",persist:!0}),e())}))}))]);case 3:return t.sent(),[4,(o("Creating default profile",{group:"background",persist:!0}),new Promise((function(e,t){chrome.management.getAll((function(n){o("Got extensions",{group:"background",persist:!0});var r=n.map((function(e){return{id:e.id,enabled:e.enabled}})),i=(new Date).toISOString(),s={profiles:[{id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:"Default",extensions:r,createdAt:i,updatedAt:i}],currentProfileId:null};o("Setting default profile",{group:"background",persist:!0}),chrome.storage.local.set({"extension-manager-profiles":s},(function(){chrome.runtime.lastError?(a("Error saving default profile",{group:"background",persist:!0}),t(chrome.runtime.lastError)):(o("Default profile saved to storage",{group:"background",persist:!0}),e())}))}))})))];case 4:t.sent(),t.label=5;case 5:return o("Installation process completed",{group:"background",persist:!0}),[3,7];case 6:return t.sent(),a("Error during installation",{group:"background",persist:!0}),[3,7];case 7:return[2]}}))}))})),chrome.management.onEnabled.addListener((function(e){o("Extension enabled: ".concat(e.name),{group:"background",persist:!0})})),chrome.management.onDisabled.addListener((function(e){o("Extension disabled: ".concat(e.name),{group:"background",persist:!0})})),chrome.runtime.onMessage.addListener((function(e,t,n){return o("Received message",{group:"background",persist:!0}),"COLOR_SCHEME_CHANGED"===e.type&&(o("Color scheme changed",{group:"background",persist:!0}),r=e.isDarkMode,E(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(t){switch(t.label){case 0:o("Updating extension icon",{group:"background",persist:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),e=r?"/icons/dark/":"/icons/light/",[4,chrome.action.setIcon({path:{16:"".concat(e,"icon16.png"),48:"".concat(e,"icon48.png"),128:"".concat(e,"icon128.png")}})];case 2:return t.sent(),o("Icon updated",{group:"background",persist:!0}),[3,4];case 3:return t.sent(),a("Failed to update extension icon",{group:"background",persist:!0}),[3,4];case 4:return[2]}}))})),n({success:!0})),!0;var r}))})();