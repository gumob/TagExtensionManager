/*! For license information please see background.js.LICENSE.txt */
(()=>{"use strict";var e={713:(e,t)=>{Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o=Object.assign,r={};function a(e,t,o){this.props=e,this.context=t,this.refs=r,this.updater=o||n}function c(){}function i(e,t,o){this.props=e,this.context=t,this.refs=r,this.updater=o||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},c.prototype=a.prototype;var s=i.prototype=new c;s.constructor=i,o(s,a.prototype),s.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty},758:(e,t,n)=>{n(713)}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(758);var n=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function c(e){try{s(o.next(e))}catch(e){a(e)}}function i(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}s((o=o.apply(e,t||[])).next())}))},o=function(e,t){var n,o,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};console.debug("[Extension Manager][background] Starting background script"),chrome.runtime.onInstalled.addListener((function(e){return n(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return console.debug("[Extension Manager][background] Extension installed",e),[4,n(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,n(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),[4,chrome.offscreen.hasDocument()];case 1:return t.sent()?[4,chrome.offscreen.closeDocument()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,chrome.offscreen.createDocument({url:"offscreen.html",reasons:["DOM_PARSER"],justification:"Detect system theme changes"})];case 4:return t.sent(),console.debug("[Extension Manager][background] Offscreen document created successfully"),[3,6];case 5:return e=t.sent(),console.error("[Extension Manager][background] Failed to create offscreen document:",e),[3,6];case 6:return[2]}}))}))];case 1:return e.sent(),[2]}}))}))];case 1:return t.sent(),"install"===e.reason&&(console.debug("[Extension Manager][background] Creating Default profile"),chrome.management.getAll((function(e){var t=e.map((function(e){return{id:e.id,enabled:e.enabled}}));chrome.runtime.sendMessage({type:"CREATE_DEFAULT_PROFILE",extensions:t})}))),[2]}}))}))})),chrome.management.onEnabled.addListener((function(e){console.debug("[Extension Manager][background] Extension enabled: ".concat(e.name))})),chrome.management.onDisabled.addListener((function(e){console.debug("[Extension Manager][background] Extension disabled: ".concat(e.name))})),chrome.runtime.onMessage.addListener((function(e,t,n){return console.debug("[Extension Manager][background] Received message:",e),"COLOR_SCHEME_CHANGED"===e.type?(console.debug("[Extension Manager][background] Color scheme changed:",e.isDarkMode?"dark":"light"),o=e.isDarkMode,r=void 0,a=void 0,i=function(){var e,t;return function(e,t){var n,o,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){switch(n.label){case 0:console.debug("[Extension Manager][background] Updating extension icon to ",o?"dark":"light"),e=o?"/icons/dark/":"/icons/light/",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,chrome.action.setIcon({path:{16:"".concat(e,"icon16.png"),48:"".concat(e,"icon48.png"),128:"".concat(e,"icon128.png")}})];case 2:return n.sent(),console.debug("[Extension Manager][background] Icon updated to ".concat(o?"dark":"light"," mode")),[3,4];case 3:return t=n.sent(),console.error("[Extension Manager][background] Failed to update extension icon:",t),[3,4];case 4:return[2]}}))},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof c?r:new c((function(e){e(r)}))).then(n,o)}s((i=i.apply(r,a||[])).next())})),n({success:!0})):"CREATE_DEFAULT_PROFILE"===e.type&&(console.debug("[Extension Manager][background] Creating Default profile"),chrome.management.getAll((function(e){var t=e.map((function(e){return{id:e.id,enabled:e.enabled}}));chrome.runtime.sendMessage({type:"CREATE_DEFAULT_PROFILE",extensions:t})})),n({success:!0})),!0;var o,r,a,c,i}))})();