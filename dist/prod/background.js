(()=>{"use strict";const e=async e=>{const n=e?"/icons/dark/":"/icons/light/";try{await chrome.action.setIcon({path:{16:`${n}icon16.png`,48:`${n}icon48.png`,128:`${n}icon128.png`}})}catch(e){console.error("Failed to update extension icon:",e)}},n="extensionTheme",o="dark";chrome.runtime.onInstalled.addListener((()=>{console.debug("[Extension Manager] Extension Manager installed"),console.debug("[Extension Manager] Initialize Theme Listner"),chrome.storage.local.get([n],(t=>{const a="dark"===(t[n]||o);console.debug("[Extension Manager] Current theme:",a?"dark":"light"),e(a),t[n]||chrome.storage.local.set({[n]:o})})),chrome.storage.onChanged.addListener((o=>{if(o[n]){const t="dark"===o[n].newValue;console.debug("[Extension Manager] Theme changed to:",t?"dark":"light"),e(t)}}))}))})();