/*! For license information please see background.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/background/themeListener.ts":(e,n,t)=>{t.r(n),t.d(n,{initializeThemeListener:()=>i});var o=t("./src/utils/iconManager.ts"),r="extensionTheme",a="dark",i=function(){console.debug("[Extension Manager] Initialize Theme Listner"),chrome.storage.local.get([r],(function(e){var n,t="dark"===(e[r]||a);console.debug("[Extension Manager] Current theme:",t?"dark":"light"),(0,o.updateExtensionIcon)(t),e[r]||chrome.storage.local.set(((n={})[r]=a,n))})),chrome.storage.onChanged.addListener((function(e){if(e[r]){var n="dark"===e[r].newValue;console.debug("[Extension Manager] Theme changed to:",n?"dark":"light"),(0,o.updateExtensionIcon)(n)}}))}},"./src/utils/iconManager.ts":(e,n,t)=>{t.r(n),t.d(n,{initializeIconTheme:()=>i,updateExtensionIcon:()=>a});var o=function(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((o=o.apply(e,n||[])).next())}))},r=function(e,n){var t,o,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=function(e){return o(void 0,void 0,void 0,(function(){var n,t;return r(this,(function(o){switch(o.label){case 0:n=e?"/icons/dark/":"/icons/light/",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,chrome.action.setIcon({path:{16:"".concat(n,"icon16.png"),48:"".concat(n,"icon48.png"),128:"".concat(n,"icon128.png")}})];case 2:return o.sent(),[3,4];case 3:return t=o.sent(),console.error("Failed to update extension icon:",t),[3,4];case 4:return[2]}}))}))},i=function(){return o(void 0,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:return e=window.matchMedia("(prefers-color-scheme: dark)").matches,console.debug("[Extension Manager] isDarkMode: ${isDarkMode}"),[4,a(e)];case 1:return n.sent(),[2]}}))}))}}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{t.r(o);var e=t("./src/background/themeListener.ts");chrome.runtime.onInstalled.addListener((function(){console.log("Extension Manager installed"),(0,e.initializeThemeListener)()})),chrome.management.onEnabled.addListener((function(e){console.log("Extension enabled: ".concat(e.name))})),chrome.management.onDisabled.addListener((function(e){console.log("Extension disabled: ".concat(e.name))}))})()})();