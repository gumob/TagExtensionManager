(()=>{"use strict";var t,e,r=(t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});e=Error,r((function(t,r,n){var o=e.call(this,t)||this;return o.code=r,o.details=n,o.name="AppError",o}),e);const n={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},o={silent:{level:-1},fatal:{level:n.fatal},error:{level:n.error},warn:{level:n.warn},log:{level:n.log},info:{level:n.info},success:{level:n.success},fail:{level:n.fail},ready:{level:n.info},start:{level:n.info},box:{level:n.info},debug:{level:n.debug},trace:{level:n.trace},verbose:{level:n.verbose}};function s(t){if(null===t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.iterator in t||Symbol.toStringTag in t&&"[object Module]"!==Object.prototype.toString.call(t))}function i(t,e,r=".",n){if(!s(e))return i(t,{},r,n);const o=Object.assign({},e);for(const e in t){if("__proto__"===e||"constructor"===e)continue;const a=t[e];null!=a&&(n&&n(o,e,a,r)||(Array.isArray(a)&&Array.isArray(o[e])?o[e]=[...a,...o[e]]:s(a)&&s(o[e])?o[e]=i(a,o[e],(r?`${r}.`:"")+e.toString(),n):o[e]=a))}return o}const a=(...t)=>t.reduce(((t,e)=>i(t,e,"",undefined)),{});let l=!1;const c=[];class u{options;_lastLog;_mockFn;constructor(t={}){const e=t.types||o;this.options=a({...t,defaults:{...t.defaults},level:h(t.level,e),reporters:[...t.reporters||[]]},{types:o,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const t in e){const r={type:t,...this.options.defaults,...e[t]};this[t]=this._wrapLogFn(r),this[t].raw=this._wrapLogFn(r,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=h(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new u({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(-1!==e)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=t=>{this[e].raw(String(t).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){l=!0}resumeLogs(){l=!1;const t=c.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,"function"==typeof e)for(const t in this.options.types)this[t]=e(t,this.options.types[t])||this[t],this[t].raw=this[t]}_wrapLogFn(t,e){return(...r)=>{if(!l)return this._logFn(t,r,e);c.push([this,t,r,e])}}_logFn(t,e,r){if((t.level||0)>this.level)return!1;const n={date:new Date,args:[],...t,level:h(t.level,this.options.types)};var o,s;r||1!==e.length||(o=e[0],s=o,"[object Object]"!==Object.prototype.toString.call(s)||!o.message&&!o.args||o.stack)?n.args=[...e]:Object.assign(n,e[0]),n.message&&(n.args.unshift(n.message),delete n.message),n.additional&&(Array.isArray(n.additional)||(n.additional=n.additional.split("\n")),n.args.push("\n"+n.additional.join("\n")),delete n.additional),n.type="string"==typeof n.type?n.type.toLowerCase():"log",n.tag="string"==typeof n.tag?n.tag:"";const i=(t=!1)=>{const e=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&e>0){const t=[...this._lastLog.object.args];e>1&&t.push(`(repeated ${e} times)`),this._log({...this._lastLog.object,args:t}),this._lastLog.count=1}t&&(this._lastLog.object=n,this._log(n))};clearTimeout(this._lastLog.timeout);const a=this._lastLog.time&&n.date?n.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=n.date,a<this.options.throttle)try{const t=JSON.stringify([n.type,n.tag,n.args]),e=this._lastLog.serialized===t;if(this._lastLog.serialized=t,e&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(i,this.options.throttle))}catch{}i(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function h(t,e={},r=3){return void 0===t?r:"number"==typeof t?t:e[t]&&void 0!==e[t].level?e[t].level:r}u.prototype.add=u.prototype.addReporter,u.prototype.remove=u.prototype.removeReporter,u.prototype.clear=u.prototype.removeReporter,u.prototype.withScope=u.prototype.withTag,u.prototype.mock=u.prototype.mockTypes,u.prototype.pause=u.prototype.pauseLogs,u.prototype.resume=u.prototype.resumeLogs;class p{options;defaultColor;levelColorMap;typeColorMap;constructor(t){this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:1===t?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),r="log"===t.type?"":t.type,n=t.tag||"",o=`\n      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,s=`%c${[n,r].filter(Boolean).join(":")}`;"string"==typeof t.args[0]?e(`${s}%c ${t.args[0]}`,o,"",...t.args.slice(1)):e(s,o,...t.args)}}function g(t={}){const e=function(t={}){return new u(t)}({reporters:t.reporters||[new p({})],prompt:(t,e={})=>"confirm"===e.type?Promise.resolve(confirm(t)):Promise.resolve(prompt(t)),...t});return e}g();const f={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function d(t,e,r,n=!1){const o=String(e),s=(t,e)=>`[${e[0]}m${t}[${e[1]}m`,i=(t,e)=>null!=e&&"string"==typeof e?s(t,f[e]):null!=e&&Array.isArray(e)?e.reduce(((t,e)=>i(t,e)),t):null!=e&&null!=e[t.trim()]?i(t,e[t.trim()]):null!=e&&null!=e["*"]?i(t,e["*"]):t;return o.replace(/{{(.+?)}}/g,((e,o)=>{const a=null!=r[o]?String(r[o]):n?"":e;return t.stylePrettyLogs?i(a,t?.prettyLogStyles?.[o]??null)+s("",f.reset):a}))}function m(t,e=2,r=0){return null!=t&&isNaN(t)?"":(t=null!=t?t+r:t,2===e?null==t?"--":t<10?"0"+t:t.toString():null==t?"---":t<10?"00"+t:t<100?"0"+t:t.toString())}function y(t){const e=new Set;return JSON.stringify(t,((t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return"[Circular]";e.add(r)}return"bigint"==typeof r?`${r}`:r}))}function b(t,e){const r={seen:[],stylize:v};return null!=e&&x(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!0),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=O),M(r,t,r.depth)}function w(t){return void 0===t}function v(t){return t}function O(t,e){const r=b.styles[e];return null!=r&&null!=b?.colors?.[r]?.[0]&&null!=b?.colors?.[r]?.[1]?"["+b.colors[r][0]+"m"+t+"["+b.colors[r][1]+"m":t}function L(t){return"function"==typeof t}function _(t){return"string"==typeof t}function S(t){return null===t}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t){return E(t)&&"[object RegExp]"===T(t)}function E(t){return"object"==typeof t&&null!==t}function P(t){return E(t)&&("[object Error]"===T(t)||t instanceof Error)}function N(t){return E(t)&&"[object Date]"===T(t)}function T(t){return Object.prototype.toString.call(t)}function F(t){return"["+Error.prototype.toString.call(t)+"]"}function M(t,e,r=0){if(t.customInspect&&null!=e&&L(e)&&e?.inspect!==b&&(!e?.constructor||e?.constructor.prototype!==e)){if("function"!=typeof e.inspect&&null!=e.toString)return e.toString();let n=e?.inspect(r,t);return _(n)||(n=M(t,n,r)),n}const n=A(t,e);if(n)return n;let o=Object.keys(e);const s=function(t){const e={};return t.forEach((t=>{e[t]=!0})),e}(o);try{t.showHidden&&Object.getOwnPropertyNames&&(o=Object.getOwnPropertyNames(e))}catch(t){}if(P(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return F(e);if(0===o.length){if(!L(t.stylize))return e;if(L(e)){const r=e.name?": "+e.name:"";return t.stylize("[Function"+r+"]","special")}if(k(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(N(e))return t.stylize(Date.prototype.toISOString.call(e),"date");if(P(e))return F(e)}let i,a="",l=!1,c=["{\n","\n}"];return Array.isArray(e)&&(l=!0,c=["[\n","\n]"]),L(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),k(e)&&(a=" "+RegExp.prototype.toString.call(e)),N(e)&&(a=" "+Date.prototype.toUTCString.call(e)),P(e)&&(a=" "+F(e)),0!==o.length||l&&0!=e.length?r<0?k(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),i=l?function(t,e,r,n,o){const s=[];for(let o=0,i=e.length;o<i;++o)j(e,String(o))?s.push(C(t,e,r,n,String(o),!0)):s.push("");return o.forEach((o=>{o.match(/^\d+$/)||s.push(C(t,e,r,n,o,!0))})),s}(t,e,r,s,o):o.map((n=>C(t,e,r,s,n,l))),t.seen.pop(),function(t,e,r){return r[0]+(""===e?"":e+"\n")+"  "+t.join(",\n  ")+" "+r[1]}(i,a,c)):c[0]+a+c[1]}function C(t,e,r,n,o,s){let i,a,l={value:void 0};try{l.value=e[o]}catch(t){}try{Object.getOwnPropertyDescriptor&&(l=Object.getOwnPropertyDescriptor(e,o)||l)}catch(t){}if(l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),j(n,o)||(i="["+o+"]"),a||(t.seen.indexOf(l.value)<0?(a=S(r)?M(t,l.value,void 0):M(t,l.value,r-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map((t=>"  "+t)).join("\n").substr(2):"\n"+a.split("\n").map((t=>"   "+t)).join("\n"))):a=t.stylize("[Circular]","special")),w(i)){if(s&&o.match(/^\d+$/))return a;i=JSON.stringify(""+o),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=t.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),i=t.stylize(i,"string"))}return i+": "+a}function A(t,e){if(w(e))return t.stylize("undefined","undefined");if(_(e)){const r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return t.stylize(r,"string")}return"number"==typeof e?t.stylize(""+e,"number"):"boolean"==typeof e?t.stylize(""+e,"boolean"):S(e)?t.stylize("null","null"):void 0}function x(t,e){const r={...t};if(!e||!E(e))return t;const n={...e},o=Object.keys(e);let s=o.length;for(;s--;)r[o[s]]=n[o[s]];return r}b.colors=f,b.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};const I={getCallerStackFrame:R,getErrorTrace:z,getMeta:function(t,e,r,n,o,s){return Object.assign({},D,{name:o,parentNames:s,date:new Date,logLevelId:t,logLevelName:e,path:n?void 0:R(r)})},transportJSON:function(t){console.log(y(t))},transportFormatted:function(t,e,r,n){const o=(r.length>0&&e.length>0?"\n":"")+r.join("\n");n.prettyInspectOptions.colors=n.stylePrettyLogs,console.log(t+function(t,...e){const r={seen:[],stylize:v};null!=t&&x(r,t);const n=e[0];let o=0,s="",i="";if("string"==typeof n){if(1===e.length)return n;let a,l=0;for(let i=0;i<n.length-1;i++)if(37===n.charCodeAt(i)){const c=n.charCodeAt(++i);if(o+1!==e.length){switch(c){case 115:{const n=e[++o];a="number"==typeof n||"bigint"==typeof n?A(r,n):"object"!=typeof n||null===n?String(n):b(n,{...t,compact:3,colors:!1,depth:0});break}case 106:a=y(e[++o]);break;case 100:{const t=e[++o];a="bigint"==typeof t?A(r,t):"symbol"==typeof t?"NaN":A(r,t);break}case 79:a=b(e[++o],t);break;case 111:a=b(e[++o],{...t,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const t=e[++o];a="bigint"==typeof t?A(r,t):"symbol"==typeof t?"NaN":A(r,parseInt(a));break}case 102:{const t=e[++o];a="symbol"==typeof t?"NaN":A(r,parseInt(t));break}case 99:o+=1,a="";break;case 37:s+=n.slice(l,i),l=i+1;continue;default:continue}l!==i-1&&(s+=n.slice(l,i-1)),s+=a,l=i+1}else 37===c&&(s+=n.slice(l,i),l=i+1)}0!==l&&(o++,i=" ",l<n.length&&(s+=n.slice(l)))}for(;o<e.length;){const r=e[o];s+=i,s+="string"!=typeof r?b(r,t):r,i=" ",o++}return s}(n.prettyInspectOptions,...e)+o)},isBuffer:function(t){return!1},isError:$,prettyFormatLogObj:function(t,e){return t.reduce(((t,r)=>($(r)?t.errors.push(V(r,e)):t.args.push(r),t)),{args:[],errors:[]})},prettyFormatErrorObj:V},D={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:globalThis?.navigator?.userAgent},B=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function R(t,e=Error()){return W(e?.stack?.split("\n")?.filter((t=>!t.includes("Error: ")))?.[t])}function z(t){return(t?.stack?.split("\n")??[])?.filter((t=>!t.includes("Error: ")))?.reduce(((t,e)=>(t.push(W(e)),t)),[])}function W(t){const e=globalThis?.location?.origin,r={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(null!=t){const n=t.match(B);if(n){r.filePath=n[1].replace(/\?.*$/,""),r.fullFilePath=`${e}${r.filePath}`;const t=r.filePath.split("/");r.fileName=t[t.length-1],r.fileLine=n[2],r.fileColumn=n[3],r.filePathWithLine=`${r.filePath}:${r.fileLine}`,r.fileNameWithLine=`${r.fileName}:${r.fileLine}`}}return r}function $(t){return t instanceof Error}function V(t,e){const r=z(t).map((t=>d(e,e.prettyErrorStackTemplate,{...t},!0))),n={errorName:` ${t.name} `,errorMessage:Object.getOwnPropertyNames(t).reduce(((e,r)=>("stack"!==r&&e.push(t[r]),e)),[]).join(", "),errorStack:r.join("\n")};return d(e,e.prettyErrorTemplate,n)}class K{constructor(t,e,r=4){this.logObj=e,this.stackDepthLevel=r,this.runtime=I,this.settings={type:t?.type??"pretty",name:t?.name,parentNames:t?.parentNames,minLevel:t?.minLevel??0,argumentsArrayName:t?.argumentsArrayName,hideLogPositionForProduction:t?.hideLogPositionForProduction??!1,prettyLogTemplate:t?.prettyLogTemplate??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}\t{{logLevelName}}\t{{filePathWithLine}}{{nameWithDelimiterPrefix}}\t",prettyErrorTemplate:t?.prettyErrorTemplate??"\n{{errorName}} {{errorMessage}}\nerror stack:\n{{errorStack}}",prettyErrorStackTemplate:t?.prettyErrorStackTemplate??"  â€¢ {{fileName}}\t{{method}}\n\t{{filePathWithLine}}",prettyErrorParentNamesSeparator:t?.prettyErrorParentNamesSeparator??":",prettyErrorLoggerNameDelimiter:t?.prettyErrorLoggerNameDelimiter??"\t",stylePrettyLogs:t?.stylePrettyLogs??!0,prettyLogTimeZone:t?.prettyLogTimeZone??"UTC",prettyLogStyles:t?.prettyLogStyles??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:t?.prettyInspectOptions??{colors:!0,compact:!1,depth:1/0},metaProperty:t?.metaProperty??"_meta",maskPlaceholder:t?.maskPlaceholder??"[***]",maskValuesOfKeys:t?.maskValuesOfKeys??["password"],maskValuesOfKeysCaseInsensitive:t?.maskValuesOfKeysCaseInsensitive??!1,maskValuesRegEx:t?.maskValuesRegEx,prefix:[...t?.prefix??[]],attachedTransports:[...t?.attachedTransports??[]],overwrite:{mask:t?.overwrite?.mask,toLogObj:t?.overwrite?.toLogObj,addMeta:t?.overwrite?.addMeta,addPlaceholders:t?.overwrite?.addPlaceholders,formatMeta:t?.overwrite?.formatMeta,formatLogObj:t?.overwrite?.formatLogObj,transportFormatted:t?.overwrite?.transportFormatted,transportJSON:t?.overwrite?.transportJSON}}}log(t,e,...r){if(t<this.settings.minLevel)return;const n=[...this.settings.prefix,...r],o=null!=this.settings.overwrite?.mask?this.settings.overwrite?.mask(n):null!=this.settings.maskValuesOfKeys&&this.settings.maskValuesOfKeys.length>0?this._mask(n):n,s=null!=this.logObj?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,i=null!=this.settings.overwrite?.toLogObj?this.settings.overwrite?.toLogObj(o,s):this._toLogObj(o,s),a=null!=this.settings.overwrite?.addMeta?this.settings.overwrite?.addMeta(i,t,e):this._addMetaToLogObj(i,t,e);let l,c;return null!=this.settings.overwrite?.formatMeta&&(l=this.settings.overwrite?.formatMeta(a?.[this.settings.metaProperty])),null!=this.settings.overwrite?.formatLogObj&&(c=this.settings.overwrite?.formatLogObj(o,this.settings)),"pretty"===this.settings.type&&(l=l??this._prettyFormatLogObjMeta(a?.[this.settings.metaProperty]),c=c??this.runtime.prettyFormatLogObj(o,this.settings)),null!=l&&null!=c?null!=this.settings.overwrite?.transportFormatted?this.settings.overwrite?.transportFormatted(l,c.args,c.errors,this.settings):this.runtime.transportFormatted(l,c.args,c.errors,this.settings):null!=this.settings.overwrite?.transportJSON?this.settings.overwrite?.transportJSON(a):"hidden"!==this.settings.type&&this.runtime.transportJSON(a),null!=this.settings.attachedTransports&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach((t=>{t(a)})),a}attachTransport(t){this.settings.attachedTransports.push(t)}getSubLogger(t,e){const r={...this.settings,...t,parentNames:null!=this.settings?.parentNames&&null!=this.settings?.name?[...this.settings.parentNames,this.settings.name]:null!=this.settings?.name?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...t?.prefix??[]]};return new this.constructor(r,e??this.logObj,this.stackDepthLevel)}_mask(t){const e=!0!==this.settings.maskValuesOfKeysCaseInsensitive?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map((t=>t.toLowerCase()));return t?.map((t=>this._recursiveCloneAndMaskValuesOfKeys(t,e)))}_recursiveCloneAndMaskValuesOfKeys(t,e,r=[]){if(r.includes(t))return{...t};if("object"==typeof t&&null!==t&&r.push(t),this.runtime.isError(t)||this.runtime.isBuffer(t))return t;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Array.isArray(t))return t.map((t=>this._recursiveCloneAndMaskValuesOfKeys(t,e,r)));if(t instanceof Date)return new Date(t.getTime());if(t instanceof URL)return{href:(n=t).href,protocol:n.protocol,username:n.username,password:n.password,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchParams:[...n.searchParams].map((([t,e])=>({key:t,value:e}))),hash:n.hash,origin:n.origin};if(null!==t&&"object"==typeof t){const n=this.runtime.isError(t)?this._cloneError(t):Object.create(Object.getPrototypeOf(t));return Object.getOwnPropertyNames(t).reduce(((n,o)=>(n[o]=e.includes(!0!==this.settings?.maskValuesOfKeysCaseInsensitive?o:o.toLowerCase())?this.settings.maskPlaceholder:(()=>{try{return this._recursiveCloneAndMaskValuesOfKeys(t[o],e,r)}catch(t){return null}})(),n)),n)}if("string"==typeof t){let e=t;for(const t of this.settings?.maskValuesRegEx||[])e=e.replace(t,this.settings?.maskPlaceholder||"");return e}return t;var n}_recursiveCloneAndExecuteFunctions(t,e=[]){return this.isObjectOrArray(t)&&e.includes(t)?this.shallowCopy(t):(this.isObjectOrArray(t)&&e.push(t),Array.isArray(t)?t.map((t=>this._recursiveCloneAndExecuteFunctions(t,e))):t instanceof Date?new Date(t.getTime()):this.isObject(t)?Object.getOwnPropertyNames(t).reduce(((r,n)=>{const o=Object.getOwnPropertyDescriptor(t,n);if(o){Object.defineProperty(r,n,o);const s=t[n];r[n]="function"==typeof s?s():this._recursiveCloneAndExecuteFunctions(s,e)}return r}),Object.create(Object.getPrototypeOf(t))):t)}isObjectOrArray(t){return"object"==typeof t&&null!==t}isObject(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}shallowCopy(t){return Array.isArray(t)?[...t]:{...t}}_toLogObj(t,e={}){return t=t?.map((t=>this.runtime.isError(t)?this._toErrorObject(t):t)),null==this.settings.argumentsArrayName?1!==t.length||Array.isArray(t[0])||!0===this.runtime.isBuffer(t[0])||t[0]instanceof Date?{...e,...t}:"object"==typeof t[0]&&null!=t[0]?{...t[0],...e}:{0:t[0],...e}:{...e,[this.settings.argumentsArrayName]:t}}_cloneError(t){const e=new t.constructor;return Object.getOwnPropertyNames(t).forEach((r=>{e[r]=t[r]})),e}_toErrorObject(t){return{nativeError:t,name:t.name??"Error",message:t.message,stack:this.runtime.getErrorTrace(t)}}_addMetaToLogObj(t,e,r){return{...t,[this.settings.metaProperty]:this.runtime.getMeta(e,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(t){if(null==t)return"";let e=this.settings.prettyLogTemplate;const r={};e.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?e=e.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):"UTC"===this.settings.prettyLogTimeZone?(r.yyyy=t?.date?.getUTCFullYear()??"----",r.mm=m(t?.date?.getUTCMonth(),2,1),r.dd=m(t?.date?.getUTCDate(),2),r.hh=m(t?.date?.getUTCHours(),2),r.MM=m(t?.date?.getUTCMinutes(),2),r.ss=m(t?.date?.getUTCSeconds(),2),r.ms=m(t?.date?.getUTCMilliseconds(),3)):(r.yyyy=t?.date?.getFullYear()??"----",r.mm=m(t?.date?.getMonth(),2,1),r.dd=m(t?.date?.getDate(),2),r.hh=m(t?.date?.getHours(),2),r.MM=m(t?.date?.getMinutes(),2),r.ss=m(t?.date?.getSeconds(),2),r.ms=m(t?.date?.getMilliseconds(),3));const n="UTC"===this.settings.prettyLogTimeZone?t?.date:new Date(t?.date?.getTime()-6e4*t?.date?.getTimezoneOffset());r.rawIsoStr=n?.toISOString(),r.dateIsoStr=n?.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=t?.logLevelName,r.fileNameWithLine=t?.path?.fileNameWithLine??"",r.filePathWithLine=t?.path?.filePathWithLine??"",r.fullFilePath=t?.path?.fullFilePath??"";let o=this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);return o=null!=o&&null!=t?.name?o+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=null!=t?.name||null!=o?(o??"")+t?.name??"":"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",null!=this.settings.overwrite?.addPlaceholders&&this.settings.overwrite?.addPlaceholders(t,r),d(this.settings,e,r)}}var U=new class extends K{constructor(t,e){const r="undefined"!=typeof window&&"undefined"!=typeof document,n=!!r&&void 0!==window.chrome&&void 0!==window.CSS&&window.CSS.supports("color","green"),o=!!r&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(t=t||{}).stylePrettyLogs=!(t.stylePrettyLogs&&r&&!n)&&t.stylePrettyLogs,super(t,e,o?4:5)}log(t,e,...r){return super.log(t,e,...r)}silly(...t){return super.log(0,"SILLY",...t)}trace(...t){return super.log(1,"TRACE",...t)}debug(...t){return super.log(2,"DEBUG",...t)}info(...t){return super.log(3,"INFO",...t)}warn(...t){return super.log(4,"WARN",...t)}error(...t){return super.log(5,"ERROR",...t)}fatal(...t){return super.log(6,"FATAL",...t)}getSubLogger(t,e){return super.getSubLogger(t,e)}}({name:"CEM",prettyLogTemplate:"{{hh}}:{{MM}}:{{ss}}:{{ms}} {{logLevelName}} [{{name}}][{{fileNameWithLine}}] ",type:"pretty",minLevel:2}),G=function(t,e,r,n){return new(r||(r=Promise))((function(o,s){function i(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,a)}l((n=n.apply(t,e||[])).next())}))},J=function(t,e){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},H=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getLocalStorage=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.storage.local.get(t)];case 1:return[2,r.sent()];case 2:throw e=r.sent(),U.warn("Failed to get value from storage",e),e;case 3:return[2]}}))}))},t.prototype.setLocalStorage=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.storage.local.set(t)];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),U.warn("Failed to set value in storage",e),e;case 3:return[2]}}))}))},t.prototype.removeLocalStorage=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.storage.local.remove(t)];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),U.warn("Failed to remove value from storage",e),e;case 3:return[2]}}))}))},t.prototype.clearLocalStorage=function(){return G(this,void 0,void 0,(function(){var t;return J(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,chrome.storage.local.clear()];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),U.warn("Failed to clear local storage",t),t;case 3:return[2]}}))}))},t.prototype.getCurrentTab=function(){return G(this,void 0,void 0,(function(){var t;return J(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,chrome.tabs.query({active:!0,currentWindow:!0})];case 1:return[2,e.sent()[0]||null];case 2:throw t=e.sent(),U.warn("Failed to get current tab",t),t;case 3:return[2]}}))}))},t.prototype.createTab=function(t){return G(this,void 0,void 0,(function(){var e,r,n,o;return J(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e=navigator.userAgent.toLowerCase(),r="chrome://extensions",e.includes("brave")?r="brave://extensions":e.includes("edg")?r="edge://extensions":e.includes("opera")?r="opera://extensions":e.includes("vivaldi")&&(r="vivaldi://extensions"),n="".concat(r,"/?id=").concat(t),[4,chrome.tabs.create({url:n,active:!0})];case 1:return[2,s.sent()];case 2:throw o=s.sent(),U.warn("Failed to create tab",o),o;case 3:return[2]}}))}))},t.prototype.sendMessage=function(t,e){return G(this,void 0,void 0,(function(){var r;return J(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,chrome.tabs.sendMessage(t,e)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),U.warn("Failed to send message to tab",r),r;case 3:return[2]}}))}))},t.prototype.sendRuntimeMessage=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.runtime.sendMessage(t)];case 1:return[2,r.sent()];case 2:throw e=r.sent(),U.warn("Failed to send runtime message",e),e;case 3:return[2]}}))}))},t.prototype.addMessageListener=function(t){chrome.runtime.onMessage.addListener(t)},t.prototype.setIcon=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chrome.action.setIcon(t)];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),U.warn("Failed to set icon",e),e;case 3:return[2]}}))}))},t.prototype.getAllExtensions=function(){return G(this,void 0,void 0,(function(){var t;return J(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,new Promise((function(t){chrome.management.getAll(t)}))];case 1:return[2,e.sent()];case 2:throw t=e.sent(),U.warn("Failed to get all extensions",t),t;case 3:return[2]}}))}))},t.prototype.getExtensionInfo=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,new Promise((function(e,r){chrome.management.get(t,(function(t){chrome.runtime.lastError?r(chrome.runtime.lastError):e(t)}))}))];case 1:return[2,r.sent()];case 2:throw e=r.sent(),U.warn("Failed to get extension info",e),e;case 3:return[2]}}))}))},t.prototype.toggleExtension=function(t,e){return G(this,void 0,void 0,(function(){var r;return J(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,new Promise((function(r,n){chrome.management.setEnabled(t,e,(function(){chrome.runtime.lastError?n(chrome.runtime.lastError):r()}))}))];case 1:return n.sent(),[3,3];case 2:throw r=n.sent(),U.warn("Failed to toggle extension",r),r;case 3:return[2]}}))}))},t.prototype.uninstallExtension=function(t){return G(this,void 0,void 0,(function(){var e;return J(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,new Promise((function(e,r){chrome.management.uninstall(t,(function(){chrome.runtime.lastError?r(chrome.runtime.lastError):e()}))}))];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),U.warn("Failed to uninstall extension",e),e;case 3:return[2]}}))}))},t.prototype.hasOffscreenDocument=function(){return G(this,void 0,void 0,(function(){var t;return J(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,chrome.offscreen.hasDocument()];case 1:return[2,e.sent()];case 2:throw t=e.sent(),U.warn("Failed to check offscreen document",t),t;case 3:return[2]}}))}))},t.prototype.createOffscreenDocument=function(t,e,r){return G(this,void 0,void 0,(function(){var n;return J(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,chrome.offscreen.createDocument({url:t,reasons:e,justification:r})];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),U.warn("Failed to create offscreen document",n),n;case 3:return[2]}}))}))},t.prototype.closeOffscreenDocument=function(){return G(this,void 0,void 0,(function(){var t;return J(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,chrome.offscreen.closeDocument()];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),U.warn("Failed to close offscreen document",t),t;case 3:return[2]}}))}))},t}();H.getInstance(),U.debug("Initializing offscreen document");var Y=function(){var t=window.matchMedia("(prefers-color-scheme: dark)").matches;U.debug("isDarkMode",t);try{chrome.runtime.sendMessage({type:"COLOR_SCHEME_CHANGED",isDarkMode:t},(function(t){chrome.runtime.lastError?(U.error("Failed to send theme status:",chrome.runtime.lastError),setTimeout(Y,1e3)):U.debug("Theme status sent successfully")}))}catch(t){U.error("Failed to send theme status:",t),setTimeout(Y,1e3)}},Z=window.matchMedia("(prefers-color-scheme: dark)");U.debug("Initial media query state:",Z.matches),setTimeout((function(){U.debug("Sending initial theme status"),Y()}),2e3);try{Z.addEventListener("change",(function(t){U.debug("Theme change detected:",t.matches?"dark":"light"),Y()})),U.debug("Theme change listener added successfully")}catch(t){U.error("Failed to add theme change listener:",t)}})();