/*! For license information please see offscreen.js.LICENSE.txt */
(()=>{"use strict";var e={713:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator,d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,h={};function m(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||d}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var S=b.prototype=new v;S.constructor=b,y(S,m.prototype),S.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,o)&&!T.hasOwnProperty(o)&&(a[o]=t[o]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===a[o]&&(a[o]=u[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:I.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===a?"."+k(u,0):a,w(i)?(o="",null!=e&&(o=e.replace(O,"$&/")+"/"),R(i,t,o,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+k(s=e[c],c);u+=R(s,t,o,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=R(s=s.value,t,o,l=a+k(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function C(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var $={current:null},L={transition:null},D={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:L,ReactCurrentOwner:I};function U(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=U,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=y({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=U,t.useCallback=function(e,t){return $.current.useCallback(e,t)},t.useContext=function(e){return $.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return $.current.useDeferredValue(e)},t.useEffect=function(e,t){return $.current.useEffect(e,t)},t.useId=function(){return $.current.useId()},t.useImperativeHandle=function(e,t,n){return $.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return $.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return $.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return $.current.useMemo(e,t)},t.useReducer=function(e,t,n){return $.current.useReducer(e,t,n)},t.useRef=function(e){return $.current.useRef(e)},t.useState=function(e){return $.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return $.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return $.current.useTransition()},t.version="18.3.1"},758:(e,t,n)=>{e.exports=n(713)}},t={};!function(){function e(){this.logs=[],this.MAX_LOGS=1e3}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getCallerInfo=function(){var e=(new Error).stack;if(e){var t=e.split("\n")[3];if(t){var n=t.match(/chrome-extension:\/\/[^/]+\/([^:]+):(\d+):(\d+)/);if(n)return{file:n[1],line:parseInt(n[2],10),column:parseInt(n[3],10)}}}},e.prototype.formatMessage=function(e,t,n){void 0===t&&(t={});var r=(new Date).toISOString(),o=t.group?"[".concat(t.group,"]"):"",a=n?"(".concat(n.file,":").concat(n.line,":").concat(n.column,")"):"";return"".concat(r," ").concat(o," ").concat(a," ").concat(e)},e.prototype.storeLog=function(e,t,n){if(void 0===n&&(n={}),n.persist){var r=this.getCallerInfo();this.logs.push({message:e,level:t,timestamp:Date.now(),group:n.group,caller:r}),this.logs.length>this.MAX_LOGS&&this.logs.shift()}},e.prototype.debug=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.debug(r),this.storeLog(e,"debug",t)},e.prototype.info=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.info(r),this.storeLog(e,"info",t)},e.prototype.warn=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.warn(r),this.storeLog(e,"warn",t)},e.prototype.error=function(e,t){void 0===t&&(t={});var n=this.getCallerInfo(),r=this.formatMessage(e,t,n);console.error(r),this.storeLog(e,"error",t)},e.prototype.getLogs=function(){return this.logs},e.prototype.clearLogs=function(){this.logs=[]}}();var n=function(){},r=function(){},o=function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(758);const a=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,a);return a},i=e=>e,s=e=>{const t=(e=>e?a(e):a)(e),n=e=>function(e,t=i){const n=o.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return o.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},u=e=>e?s(e):s;function c(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;const o=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),a=null!=(r=n.getItem(e))?r:null;return a instanceof Promise?a.then(o):o(a)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const l=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>l(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>l(t)(e)}}},f=(e,t)=>(n,r,o)=>{let a={storage:c((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const s=new Set,u=new Set;let f=a.storage;if(!f)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)}),r,o);const p=()=>{const e=a.partialize({...r()});return f.setItem(a.name,{state:e,version:a.version})},g=o.setState;o.setState=(e,t)=>{g(e,t),p()};const d=e(((...e)=>{n(...e),p()}),r,o);let y;o.getInitialState=()=>d;const h=()=>{var e,t;if(!f)return;i=!1,s.forEach((e=>{var t;return e(null!=(t=r())?t:d)}));const o=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:d))||void 0;return l(f.getItem.bind(f))(a.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate){const t=a.migrate(e.state,e.version);return t instanceof Promise?t.then((e=>[!0,e])):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]})).then((e=>{var t;const[o,i]=e;if(y=a.merge(i,null!=(t=r())?t:d),n(y,!0),o)return p()})).then((()=>{null==o||o(y,void 0),y=r(),i=!0,u.forEach((e=>e(y)))})).catch((e=>{null==o||o(void 0,e)}))};return o.persist={setOptions:e=>{a={...a,...e},e.storage&&(f=e.storage)},clearStorage:()=>{null==f||f.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>h(),hasHydrated:()=>i,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},a.skipHydration||h(),y||d};var p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)};u()(f((function(e){return{extensions:[],setExtensions:function(t){return e({extensions:t})},toggleExtension:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){return e.id===t?p(p({},e),{enabled:!e.enabled}):e}))}}))},toggleLock:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){return e.id===t?p(p({},e),{locked:!e.locked}):e}))}}))},importExtensionStates:function(t){return e((function(e){return{extensions:e.extensions.map((function(e){var n=t.find((function(t){return t.id===e.id}));return n?p(p({},e),{enabled:n.enabled,locked:n.locked}):e}))}}))}}}),{name:"extension-manager-extensions"}));const g={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let d;const y=new Uint8Array(16),h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));const m=function(e,t,n){if(g.randomUUID&&!t&&!e)return g.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!d){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");d=crypto.getRandomValues.bind(crypto)}return d(y)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase()}(r)};var v,b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)},S=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},x=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},I=null;u()(f((function(e,t){return{tags:[],extensionTags:[],visibleTagId:null,isLoading:!1,initialize:function(){return S(void 0,void 0,void 0,(function(){var t;return w(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e({isLoading:!0}),I?(e({tags:I.tags,extensionTags:I.extensionTags,visibleTagId:null,isLoading:!1}),[2]):[4,chrome.storage.local.get("extension-manager-tags")];case 1:return(t=o.sent())["extension-manager-tags"]&&(n("Loading tags from storage",{group:"TagStore",persist:!0}),(I={tags:t["extension-manager-tags"].tags,extensionTags:t["extension-manager-tags"].extensionTags,visibleTagId:null})&&e({tags:I.tags,extensionTags:I.extensionTags,visibleTagId:null,isLoading:!1})),[3,3];case 2:return o.sent(),r("Failed to load tags",{group:"TagStore",persist:!0}),e({isLoading:!1}),[3,3];case 3:return[2]}}))}))},setVisibleTag:function(t){e({visibleTagId:t})},showAllTags:function(){e({visibleTagId:null})},addTag:function(n){var r=t().tags,o={id:m(),name:n,order:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},a=r.map((function(e){return b(b({},e),{order:e.order+1,updatedAt:(new Date).toISOString()})})),i=x([o],a,!0);e({tags:i}),I&&(I.tags=i)},updateTag:function(n,r){var o=t().tags.map((function(e){return e.id===n?b(b({},e),{name:r,updatedAt:(new Date).toISOString()}):e}));e({tags:o})},deleteTag:function(n){var r=t(),o=r.tags,a=r.extensionTags,i=o.filter((function(e){return e.id!==n})),s=a.map((function(e){return b(b({},e),{tagIds:e.tagIds.filter((function(e){return e!==n}))})}));e({tags:i,extensionTags:s})},reorderTags:function(n){var r=t().tags,o=n.map((function(e,t){var n=r.find((function(t){return t.id===e}));return n?b(b({},n),{order:t,updatedAt:(new Date).toISOString()}):null})).filter((function(e){return null!==e}));e({tags:o})},addTagToExtension:function(n,r){var o=t().extensionTags,a=o.find((function(e){return e.extensionId===n}));if(a){if(!a.tagIds.includes(r)){var i=o.map((function(e){return e.extensionId===n?b(b({},e),{tagIds:x(x([],e.tagIds,!0),[r],!1)}):e}));e({extensionTags:i})}}else e({extensionTags:x(x([],o,!0),[{extensionId:n,tagIds:[r]}],!1)})},removeTagFromExtension:function(n,r){var o=t().extensionTags.map((function(e){return e.extensionId===n?b(b({},e),{tagIds:e.tagIds.filter((function(e){return e!==r}))}):e}));e({extensionTags:o})},importTags:function(t,n){e({tags:t,extensionTags:n})},exportTags:function(){var e=t();return{tags:e.tags,extensionTags:e.extensionTags}}}}),{name:"extension-manager-tags",storage:{getItem:function(e){return S(void 0,void 0,void 0,(function(){var t,o;return w(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),I?[2,I]:[4,chrome.storage.local.get(e)];case 1:return t=a.sent(),o=t[e],n("Loading from storage",{group:"TagStore",persist:!0}),o&&(I=o),[2,o];case 2:return a.sent(),r("Failed to load from storage",{group:"TagStore",persist:!0}),[2,null];case 3:return[2]}}))}))},setItem:function(e,t){return S(void 0,void 0,void 0,(function(){var o;return w(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n("Saving to storage",{group:"TagStore",persist:!0}),I=t,[4,chrome.storage.local.set((o={},o[e]=t,o))];case 1:return a.sent(),[3,3];case 2:return a.sent(),r("Failed to save to storage",{group:"TagStore",persist:!0}),[3,3];case 3:return[2]}}))}))},removeItem:function(e){return S(void 0,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),n("Removing from storage",{group:"TagStore",persist:!0}),I=null,[4,chrome.storage.local.remove(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),r("Failed to remove from storage",{group:"TagStore",persist:!0}),[3,3];case 3:return[2]}}))}))}},partialize:function(e){return{tags:e.tags,extensionTags:e.extensionTags}}})),n("Starting offscreen document",{group:"offscreen",persist:!0}),v=window.matchMedia("(prefers-color-scheme: dark)").matches,n("Theme detected",{group:"themeDetector",persist:!0}),chrome.runtime.sendMessage({type:"COLOR_SCHEME_CHANGED",isDarkMode:v})})();