(()=>{"use strict";var e=function(e){try{chrome.runtime.sendMessage({type:"OFFSCREEN_LOG",message:e},(function(e){chrome.runtime.lastError&&console.error("Failed to send log:",chrome.runtime.lastError)}))}catch(e){console.error("Failed to send log:",e)}};e("Initializing offscreen document");var t=function(){var r=window.matchMedia("(prefers-color-scheme: dark)").matches;e("isDarkMode: ".concat(r));try{chrome.runtime.sendMessage({type:"COLOR_SCHEME_CHANGED",isDarkMode:r},(function(r){chrome.runtime.lastError?(console.error("ðŸ›‘ Failed to send theme status:",chrome.runtime.lastError),setTimeout(t,1e3)):e("Theme status sent successfully")}))}catch(e){console.error("ðŸ›‘ Failed to send theme status:",e),setTimeout(t,1e3)}},r=window.matchMedia("(prefers-color-scheme: dark)");e("Initial media query state: ".concat(r.matches)),setTimeout((function(){e("Sending initial theme status"),t()}),2e3);var s=function(r){e("Theme change detected: ".concat(r.matches?"dark":"light")),t()};try{r.addEventListener("change",s),r.onchange=s,r.addListener(s),e("Successfully added theme change listeners")}catch(e){console.error("ðŸ›‘ Failed to add theme change listener:",e)}})();